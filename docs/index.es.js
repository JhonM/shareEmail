var e=e=>{var a;const t=document.createElement("div");var l;return t.dataset.shareForm="share-box-email-label-container",t.tabIndex=0,t.classList.add((l=e.email,/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(l).toLowerCase())?"valid":"invalid")),t.innerHTML=(e=>`\n    <label data-share-form="share-box-email-label">\n      <span  data-share-form="share-box-email">${e}<span>\n      <span data-share-form="share-box-email-close" tabindex="0">x</span>\n    </label>\n  `)(e.email),null===(a=null==t?void 0:t.querySelector('[data-share-form="share-box-email-close"]'))||void 0===a||a.addEventListener("click",(()=>{e.action()})),t.addEventListener("keydown",(a=>{13!==a.keyCode&&"Enter"!==a.code||e.action()})),t};const a=(e,a)=>{""!==e&&a(e)};var t=e=>{const t=document.createElement("div");t.dataset.shareForm="share-box-input-container",t.innerHTML=`\n    <input type="email" placeholder="${e.placeholder}" multiple>\n  `;const l=t.querySelector("input");return null==l||l.addEventListener("blur",(t=>{((e,t)=>{a(e,t)})(t.target.value,e.action),t.target.value=""})),null==l||l.addEventListener("keydown",(t=>{(188===t.keyCode||13===t.keyCode||["Comma","Enter"].includes(t.code))&&(((e,t)=>{a(e,t)})(t.target.value,e.action),t.target.value="")})),null==l||l.addEventListener("input",(function(e){const a=e.target.value.replace(/,/g,"");e.target.value=a})),null==l||l.addEventListener("paste",(a=>{((e,a)=>{(e.clipboardData||window.clipboardData).getData("text").split(/[\s,]+/).forEach((e=>a(e)))})(a,e.action),a.target.blur()})),t};class l{constructor(e,a){this.selector=e,this.list=document.createElement("span"),this.props=a,this.emails=(null==a?void 0:a.emails)||[],this.buildList()}buildList(){this.emails.forEach((a=>{const t=e({email:a,action:()=>this.removeEmail(t)});this.list.appendChild(t)})),this.selector.appendChild(this.list),this.selector.appendChild(t({placeholder:"add more people...",action:e=>this.addEmail(e)}))}addEmail(e){this.appendChildEmail(e)}randomEmail(){const e=["push@push.it","peter@doe.com","linda@doe.ru","lisa.pater@doe.com","floor@longurl.it","jan@longurl.com","robert@longurl.ru","britt.pater@longurl.com"],a=e[Math.floor(Math.random()*e.length)];this.appendChildEmail(a)}removeEmail(e){this.list.removeChild(e)}appendChildEmail(a){const t=e({email:a,action:()=>this.removeEmail(t)});this.list.appendChild(t)}emailsCount(){const e=this.list.querySelectorAll('[data-share-form="share-box-email-label-container"]').length;alert(`Current email count is: ${e}`)}}const i=(e,a)=>new l(e,a);export{i as setup};
