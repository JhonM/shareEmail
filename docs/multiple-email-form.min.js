!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).shareForm={})}(this,(function(e){"use strict";var t=e=>{var t;const a=document.createElement("div");var l;return a.dataset.shareForm="share-box-email-label-container",a.tabIndex=0,a.classList.add((l=e.email,/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(l).toLowerCase())?"valid":"invalid")),a.innerHTML=(e=>`\n    <label data-share-form="share-box-email-label">\n      <span  data-share-form="share-box-email">${e}<span>\n      <span data-share-form="share-box-email-close" tabindex="0">x</span>\n    </label>\n  `)(e.email),null===(t=null==a?void 0:a.querySelector('[data-share-form="share-box-email-close"]'))||void 0===t||t.addEventListener("click",(()=>{e.action()})),a.addEventListener("keydown",(t=>{13!==t.keyCode&&"Enter"!==t.code||e.action()})),a};const a=(e,t)=>{""!==e&&t(e)};var l=e=>{const t=document.createElement("div");t.dataset.shareForm="share-box-input-container",t.innerHTML=`\n    <input type="email" placeholder="${e.placeholder}" multiple>\n  `;const l=t.querySelector("input");return null==l||l.addEventListener("blur",(t=>{((e,t)=>{a(e,t)})(t.target.value,e.action),t.target.value=""})),null==l||l.addEventListener("keydown",(t=>{(188===t.keyCode||13===t.keyCode||["Comma","Enter"].includes(t.code))&&(((e,t)=>{a(e,t)})(t.target.value,e.action),t.target.value="")})),null==l||l.addEventListener("input",(function(e){const t=e.target.value.replace(/,/g,"");e.target.value=t})),null==l||l.addEventListener("paste",(t=>{((e,t)=>{(e.clipboardData||window.clipboardData).getData("text").split(/[\s,]+/).forEach((e=>t(e)))})(t,e.action),t.target.blur()})),t};class i{constructor(e,t){this.selector=e,this.list=document.createElement("span"),this.props=t,this.emails=(null==t?void 0:t.emails)||[],this.buildList()}buildList(){this.emails.forEach((e=>{const a=t({email:e,action:()=>this.removeEmail(a)});this.list.appendChild(a)})),this.selector.appendChild(this.list),this.selector.appendChild(l({placeholder:"add more people...",action:e=>this.addEmail(e)}))}addEmail(e){this.appendChildEmail(e)}randomEmail(){const e=["push@push.it","peter@doe.com","linda@doe.ru","lisa.pater@doe.com","floor@longurl.it","jan@longurl.com","robert@longurl.ru","britt.pater@longurl.com"],t=e[Math.floor(Math.random()*e.length)];this.appendChildEmail(t)}removeEmail(e){this.list.removeChild(e)}appendChildEmail(e){const a=t({email:e,action:()=>this.removeEmail(a)});this.list.appendChild(a)}emailsCount(){const e=this.list.querySelectorAll('[data-share-form="share-box-email-label-container"]').length;alert(`Current email count is: ${e}`)}}e.setup=(e,t)=>new i(e,t)}));
//# sourceMappingURL=multiple-email-form.min.js.map
