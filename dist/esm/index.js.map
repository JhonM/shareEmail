{"version":3,"file":"index.js","sources":["../assets/bundle.js","../../src/components/email-label/email-label.js","../../src/components/email-input/email-input.js","../../src/shareForm/index.js","../../src/index.js"],"sourcesContent":["var remove = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI4IiB2aWV3Qm94PSIwIDAgOCA4IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTggMC44TDcuMiAwTDQgMy4yTDAuOCAwTDAgMC44TDMuMiA0TDAgNy4yTDAuOCA4TDQgNC44TDcuMiA4TDggNy4yTDQuOCA0TDggMC44WiIgZmlsbD0iIzA1MDAzOCIvPgo8L3N2Zz4K\";\n\nexport { remove as Remove };\n","import { Remove } from '../../../dist/assets/bundle';\n\nconst validateEmail = (email) => {\n  const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n};\n\nconst labelTemplate = ({ email }) =>\n  `\n    <label data-share-form=\"share-box-email-label\">\n      <span>${email}<span>\n      <span data-share-form=\"share-box-email-close\" tabindex=\"0\"><img src=${Remove}></span>\n    </label>\n  `;\n\nexport default (props) => {\n  const template = document.createElement('div');\n  template.dataset.shareForm = 'share-box-email-label-container';\n  template.tabIndex = 0;\n  template.classList.add(validateEmail(props.email) ? 'valid' : 'invalid');\n  template.innerHTML = labelTemplate(props);\n\n  // remove email label on click\n  template\n    .querySelector('[data-share-form=\"share-box-email-close\"]')\n    .addEventListener('click', (e) => {\n      props.action(template);\n    });\n\n  // remove email label on enter\n  template.addEventListener('keydown', (e) => {\n    if (e.keyCode === 13 || e.code === 'Enter') {\n      props.action(template);\n    }\n  });\n\n  return template;\n};\n","const labelTemplate = ({ placeholder }) =>\n  `\n    <input type=\"email\" placeholder=\"${placeholder}\" multiple>\n  `;\n\nconst onBlur = (e, action) => {\n  fireAction(e, action);\n};\n\nconst onKeyDown = (e, action) => {\n  fireAction(e, action);\n};\n\nconst onPaste = (e, action) => {\n  const paste = (e.clipboardData || window.clipboardData).getData('text');\n  const pasteArr = paste.split(',');\n  pasteArr.forEach((email) => action(email));\n};\n\nconst fireAction = (e, action) => {\n  const newEmail = e?.target?.value;\n  if (newEmail === '') return;\n  action(newEmail);\n};\n\nexport default (props) => {\n  const template = document.createElement('div');\n  template.dataset.shareForm = 'share-box-input-container';\n  template.innerHTML = labelTemplate(props);\n\n  const input = template.querySelector('input');\n\n  // fire action on blur\n  input.addEventListener('blur', (e) => {\n    onBlur(e, props.action);\n    e.target.value = '';\n  });\n\n  // fire action when keypress is Comma or Enter\n  input.addEventListener('keydown', (e) => {\n    if (\n      e.keyCode === 188 ||\n      e.keyCode === 13 ||\n      ['Comma', 'Enter'].includes(e.code)\n    ) {\n      onKeyDown(e, props.action);\n\n      e.target.value = '';\n      input.removeEventListener('blur', onBlur);\n    }\n  });\n\n  // make sure to strip the comma when when typing\n  input.addEventListener('input', function (e) {\n    const removeComma = e.target.value.replace(/,/g, '');\n    e.target.value = removeComma;\n  });\n\n  // fire action when user paste a string with emails\n  input.addEventListener('paste', (e) => {\n    onPaste(e, props.action);\n    e.target.blur();\n  });\n\n  return template;\n};\n","import { emailLabel } from '../components/email-label';\nimport { emailInput } from '../components/email-input';\n\nexport default class shareForm {\n  constructor(selector, props) {\n    this.selector = selector;\n    this.list = document.createElement('span');\n    this.props = props;\n    this.emails = props?.emails || [];\n\n    this.buildList(this.emails);\n  }\n\n  buildList() {\n    this.emails.forEach((email) => {\n      const template = emailLabel({\n        email,\n        action: () => this.removeEmail(template),\n      });\n      this.list.appendChild(template);\n    });\n\n    this.selector.appendChild(this.list);\n\n    this.selector.appendChild(\n      emailInput({\n        placeholder: 'add more people...',\n        action: (e) => this.addEmail(e),\n      })\n    );\n  }\n\n  addEmail(email) {\n    this.appendChildEmail(email);\n  }\n\n  randomEmail() {\n    const emailArray = [\n      'push@push.it',\n      'peter@doe.com',\n      'linda@doe.ru',\n      'lisa.pater@doe.com',\n      'floor@longurl.it',\n      'jan@longurl.com',\n      'robert@longurl.ru',\n      'britt.pater@longurl.com',\n    ];\n    const randomEmail =\n      emailArray[Math.floor(Math.random() * emailArray.length)];\n\n    this.appendChildEmail(randomEmail);\n  }\n\n  removeEmail(email) {\n    this.list.removeChild(email);\n  }\n\n  appendChildEmail(email) {\n    const template = emailLabel({\n      email,\n      action: () => this.removeEmail(template),\n    });\n    this.list.appendChild(template);\n  }\n\n  emailsCount() {\n    const currentLength = this.list.querySelectorAll(\n      '[data-share-form=\"share-box-email-label-container\"]'\n    ).length;\n    alert(`Current email count is: ${currentLength}`);\n  }\n}\n","import shareForm from \"./shareForm\";\n\nexport const setup = (selector, props) => new shareForm(selector, props);\n"],"names":["labelTemplate","Remove"],"mappings":"AAAA,IAAI,MAAM,GAAG,oWAAoW;;ACEjX,MAAM,aAAa,GAAG,CAAC,KAAK,KAAK;AACjC,EAAE,MAAM,EAAE,GAAG,uJAAuJ,CAAC;AACrK,EAAE,OAAO,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC;AAC9C,CAAC,CAAC;AACF;AACA,MAAMA,eAAa,GAAG,CAAC,EAAE,KAAK,EAAE;AAChC,EAAE,CAAC;AACH;AACA,YAAY,EAAE,KAAK,CAAC;AACpB,0EAA0E,EAAEC,MAAM,CAAC;AACnF;AACA,EAAE,CAAC,CAAC;AACJ;AACA,iBAAe,CAAC,KAAK,KAAK;AAC1B,EAAE,MAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACjD,EAAE,QAAQ,CAAC,OAAO,CAAC,SAAS,GAAG,iCAAiC,CAAC;AACjE,EAAE,QAAQ,CAAC,QAAQ,GAAG,CAAC,CAAC;AACxB,EAAE,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,OAAO,GAAG,SAAS,CAAC,CAAC;AAC3E,EAAE,QAAQ,CAAC,SAAS,GAAGD,eAAa,CAAC,KAAK,CAAC,CAAC;AAC5C;AACA;AACA,EAAE,QAAQ;AACV,KAAK,aAAa,CAAC,2CAA2C,CAAC;AAC/D,KAAK,gBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC,KAAK;AACtC,MAAM,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;AAC7B,KAAK,CAAC,CAAC;AACP;AACA;AACA,EAAE,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,CAAC,KAAK;AAC9C,IAAI,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE,IAAI,CAAC,CAAC,IAAI,KAAK,OAAO,EAAE;AAChD,MAAM,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;AAC7B,KAAK;AACL,GAAG,CAAC,CAAC;AACL;AACA,EAAE,OAAO,QAAQ,CAAC;AAClB,CAAC;;ACrCD,MAAM,aAAa,GAAG,CAAC,EAAE,WAAW,EAAE;AACtC,EAAE,CAAC;AACH,qCAAqC,EAAE,WAAW,CAAC;AACnD,EAAE,CAAC,CAAC;AACJ;AACA,MAAM,MAAM,GAAG,CAAC,CAAC,EAAE,MAAM,KAAK;AAC9B,EAAE,UAAU,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;AACxB,CAAC,CAAC;AACF;AACA,MAAM,SAAS,GAAG,CAAC,CAAC,EAAE,MAAM,KAAK;AACjC,EAAE,UAAU,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;AACxB,CAAC,CAAC;AACF;AACA,MAAM,OAAO,GAAG,CAAC,CAAC,EAAE,MAAM,KAAK;AAC/B,EAAE,MAAM,KAAK,GAAG,CAAC,CAAC,CAAC,aAAa,IAAI,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;AAC1E,EAAE,MAAM,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACpC,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;AAC7C,CAAC,CAAC;AACF;AACA,MAAM,UAAU,GAAG,CAAC,CAAC,EAAE,MAAM,KAAK;AAClC,EAAE,MAAM,QAAQ,GAAG,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC;AACpC,EAAE,IAAI,QAAQ,KAAK,EAAE,EAAE,OAAO;AAC9B,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC;AACnB,CAAC,CAAC;AACF;AACA,iBAAe,CAAC,KAAK,KAAK;AAC1B,EAAE,MAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACjD,EAAE,QAAQ,CAAC,OAAO,CAAC,SAAS,GAAG,2BAA2B,CAAC;AAC3D,EAAE,QAAQ,CAAC,SAAS,GAAG,aAAa,CAAC,KAAK,CAAC,CAAC;AAC5C;AACA,EAAE,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;AAChD;AACA;AACA,EAAE,KAAK,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC,CAAC,KAAK;AACxC,IAAI,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;AAC5B,IAAI,CAAC,CAAC,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC;AACxB,GAAG,CAAC,CAAC;AACL;AACA;AACA,EAAE,KAAK,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,CAAC,KAAK;AAC3C,IAAI;AACJ,MAAM,CAAC,CAAC,OAAO,KAAK,GAAG;AACvB,MAAM,CAAC,CAAC,OAAO,KAAK,EAAE;AACtB,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC;AACzC,MAAM;AACN,MAAM,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;AACjC;AACA,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC;AAC1B,MAAM,KAAK,CAAC,mBAAmB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;AAChD,KAAK;AACL,GAAG,CAAC,CAAC;AACL;AACA;AACA,EAAE,KAAK,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAU,CAAC,EAAE;AAC/C,IAAI,MAAM,WAAW,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;AACzD,IAAI,CAAC,CAAC,MAAM,CAAC,KAAK,GAAG,WAAW,CAAC;AACjC,GAAG,CAAC,CAAC;AACL;AACA;AACA,EAAE,KAAK,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC,KAAK;AACzC,IAAI,OAAO,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;AAC7B,IAAI,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;AACpB,GAAG,CAAC,CAAC;AACL;AACA,EAAE,OAAO,QAAQ,CAAC;AAClB,CAAC;;AC9Dc,MAAM,SAAS,CAAC;AAC/B,EAAE,WAAW,CAAC,QAAQ,EAAE,KAAK,EAAE;AAC/B,IAAI,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC7B,IAAI,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;AAC/C,IAAI,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACvB,IAAI,IAAI,CAAC,MAAM,GAAG,KAAK,EAAE,MAAM,IAAI,EAAE,CAAC;AACtC;AACA,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAChC,GAAG;AACH;AACA,EAAE,SAAS,GAAG;AACd,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK;AACnC,MAAM,MAAM,QAAQ,GAAG,UAAU,CAAC;AAClC,QAAQ,KAAK;AACb,QAAQ,MAAM,EAAE,MAAM,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;AAChD,OAAO,CAAC,CAAC;AACT,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;AACtC,KAAK,CAAC,CAAC;AACP;AACA,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACzC;AACA,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW;AAC7B,MAAM,UAAU,CAAC;AACjB,QAAQ,WAAW,EAAE,oBAAoB;AACzC,QAAQ,MAAM,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;AACvC,OAAO,CAAC;AACR,KAAK,CAAC;AACN,GAAG;AACH;AACA,EAAE,QAAQ,CAAC,KAAK,EAAE;AAClB,IAAI,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;AACjC,GAAG;AACH;AACA,EAAE,WAAW,GAAG;AAChB,IAAI,MAAM,UAAU,GAAG;AACvB,MAAM,cAAc;AACpB,MAAM,eAAe;AACrB,MAAM,cAAc;AACpB,MAAM,oBAAoB;AAC1B,MAAM,kBAAkB;AACxB,MAAM,iBAAiB;AACvB,MAAM,mBAAmB;AACzB,MAAM,yBAAyB;AAC/B,KAAK,CAAC;AACN,IAAI,MAAM,WAAW;AACrB,MAAM,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;AAChE;AACA,IAAI,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC;AACvC,GAAG;AACH;AACA,EAAE,WAAW,CAAC,KAAK,EAAE;AACrB,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AACjC,GAAG;AACH;AACA,EAAE,gBAAgB,CAAC,KAAK,EAAE;AAC1B,IAAI,MAAM,QAAQ,GAAG,UAAU,CAAC;AAChC,MAAM,KAAK;AACX,MAAM,MAAM,EAAE,MAAM,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;AAC9C,KAAK,CAAC,CAAC;AACP,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;AACpC,GAAG;AACH;AACA,EAAE,WAAW,GAAG;AAChB,IAAI,MAAM,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,gBAAgB;AACpD,MAAM,qDAAqD;AAC3D,KAAK,CAAC,MAAM,CAAC;AACb,IAAI,KAAK,CAAC,CAAC,wBAAwB,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC;AACtD,GAAG;AACH;;ACrEY,MAAC,KAAK,GAAG,CAAC,QAAQ,EAAE,KAAK,KAAK,IAAI,SAAS,CAAC,QAAQ,EAAE,KAAK;;;;"}