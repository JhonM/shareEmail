{"version":3,"file":"index.js","sources":["../../src/components/email-label/email-label.js","../../src/components/email-input/email-input.js","../../src/shareForm/index.js","../../src/index.js"],"sourcesContent":["const validateEmail = (email) => {\n  const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n};\n\nconst labelTemplate = ({ email }) =>\n  `\n    <label data-share-form=\"share-box-email-label\">\n      ${email} <span data-share-form=\"share-box-email-close\" tabindex=\"0\">x</span>\n    </label>\n  `;\n\nexport default (props) => {\n  const template = document.createElement('div');\n  template.dataset.shareForm = 'share-box-email-label-container';\n  template.tabIndex = 0;\n  template.classList.add(validateEmail(props.email) ? 'valid' : 'invalid');\n  template.innerHTML = labelTemplate(props);\n  template\n    .querySelector('[data-share-form=\"share-box-email-close\"]')\n    .addEventListener('click', (e) => {\n      props.action(template);\n    });\n\n  return template;\n};\n","const labelTemplate = ({ placeholder }) =>\n  `\n    <input type=\"email\" placeholder=\"${placeholder}\" multiple>\n  `;\n\nconst onBlur = (e, action) => {\n  fireAction(e, action);\n};\n\nconst onKeyDown = (e, action) => {\n  fireAction(e, action);\n};\n\nconst onPaste = (e, action) => {\n  const paste = (e.clipboardData || window.clipboardData).getData('text');\n  const pasteArr = paste.split(',');\n  pasteArr.forEach((email) => action(email));\n};\n\nconst fireAction = (e, action) => {\n  const newEmail = e?.target?.value;\n  if (newEmail === '') return;\n  action(newEmail);\n};\n\nexport default (props) => {\n  const template = document.createElement('div');\n  template.dataset.shareForm = 'share-box-input-container';\n  template.innerHTML = labelTemplate(props);\n\n  const input = template.querySelector('input');\n\n  // fire action on blur\n  input.addEventListener('blur', (e) => {\n    input.value = '';\n    onBlur(e, props.action);\n  });\n\n  // fire action when keypress is Comma or Enter\n  input.addEventListener('keypress', (e) => {\n    if (['Comma', 'Enter'].includes(e.code)) {\n      onKeyDown(e, props.action);\n      input.focus();\n      input.removeEventListener('blur', onBlur);\n    }\n  });\n\n  // fire action when\n  input.addEventListener('paste', (e) => {\n    onPaste(e, props.action);\n    input.focus();\n    input.removeEventListener('blur', onBlur);\n  });\n\n  return template;\n};\n","import { emailLabel } from '../components/email-label';\nimport { emailInput } from '../components/email-input';\n\nexport default class shareForm {\n  constructor(selector, props) {\n    this.selector = selector;\n    this.list = document.createElement('span');\n    this.props = props;\n    this.emails = props?.emails || [];\n\n    this.build(this.emails);\n  }\n\n  build() {\n    this.buildList(this.emails);\n  }\n\n  buildList() {\n    this.emails.forEach((email) => {\n      const template = emailLabel({\n        email,\n        action: () => this.removeEmail(template),\n      });\n      this.list.appendChild(template);\n      this.selector.appendChild(this.list);\n    });\n\n    this.selector.appendChild(\n      emailInput({\n        placeholder:\n          this.emails.length > 0 ? 'add more people...' : 'add a person...',\n        action: (e) => this.addEmail(e),\n      })\n    );\n  }\n\n  addEmail(email) {\n    this.appendChildEmail(email);\n  }\n\n  randomEmail() {\n    const email = 'push@push.it';\n    this.appendChildEmail(email);\n  }\n\n  removeEmail(email) {\n    this.list.removeChild(email);\n  }\n\n  appendChildEmail(email) {\n    const template = emailLabel({\n      email,\n      action: () => this.removeEmail(template),\n    });\n    this.list.appendChild(template);\n  }\n\n  emailsCount() {\n    alert(`Current email count is: ${this.emails.length}`);\n  }\n}\n","import shareForm from \"./shareForm\";\n\nexport const setup = (selector, props) => new shareForm(selector, props);\n"],"names":["labelTemplate"],"mappings":"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"}