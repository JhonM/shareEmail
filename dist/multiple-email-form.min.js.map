{"version":3,"file":"multiple-email-form.min.js","sources":["assets/bundle.js","../src/components/email-label/email-label.js","../src/components/email-input/email-input.js","../src/shareForm/index.js","../src/index.js"],"sourcesContent":["var remove = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI4IiB2aWV3Qm94PSIwIDAgOCA4IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTggMC44TDcuMiAwTDQgMy4yTDAuOCAwTDAgMC44TDMuMiA0TDAgNy4yTDAuOCA4TDQgNC44TDcuMiA4TDggNy4yTDQuOCA0TDggMC44WiIgZmlsbD0iIzA1MDAzOCIvPgo8L3N2Zz4K\";\n\nexport { remove as Remove };\n","import { Remove } from '../../../dist/assets/bundle';\n\nconst validateEmail = (email) => {\n  const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n};\n\nconst labelTemplate = ({ email }) =>\n  `\n    <label data-share-form=\"share-box-email-label\">\n      <span>${email}<span>\n      <span data-share-form=\"share-box-email-close\" tabindex=\"0\"><img src=${Remove}></span>\n    </label>\n  `;\n\nexport default (props) => {\n  const template = document.createElement('div');\n  template.dataset.shareForm = 'share-box-email-label-container';\n  template.tabIndex = 0;\n  template.classList.add(validateEmail(props.email) ? 'valid' : 'invalid');\n  template.innerHTML = labelTemplate(props);\n\n  // remove email label on click\n  template\n    .querySelector('[data-share-form=\"share-box-email-close\"]')\n    .addEventListener('click', (e) => {\n      props.action(template);\n    });\n\n  // remove email label on enter\n  template.addEventListener('keydown', (e) => {\n    if (e.keyCode === 13 || e.code === 'Enter') {\n      props.action(template);\n    }\n  });\n\n  return template;\n};\n","const labelTemplate = ({ placeholder }) =>\n  `\n    <input type=\"email\" placeholder=\"${placeholder}\" multiple>\n  `;\n\nconst onBlur = (e, action) => {\n  fireAction(e, action);\n};\n\nconst onKeyDown = (e, action) => {\n  fireAction(e, action);\n};\n\nconst onPaste = (e, action) => {\n  const paste = (e.clipboardData || window.clipboardData).getData('text');\n  const pasteArr = paste.split(',');\n  pasteArr.forEach((email) => action(email));\n};\n\nconst fireAction = (e, action) => {\n  const newEmail = e?.target?.value;\n  if (newEmail === '') return;\n  action(newEmail);\n};\n\nexport default (props) => {\n  const template = document.createElement('div');\n  template.dataset.shareForm = 'share-box-input-container';\n  template.innerHTML = labelTemplate(props);\n\n  const input = template.querySelector('input');\n\n  // fire action on blur\n  input.addEventListener('blur', (e) => {\n    onBlur(e, props.action);\n    e.target.value = '';\n  });\n\n  // fire action when keypress is Comma or Enter\n  input.addEventListener('keydown', (e) => {\n    if (\n      e.keyCode === 188 ||\n      e.keyCode === 13 ||\n      ['Comma', 'Enter'].includes(e.code)\n    ) {\n      onKeyDown(e, props.action);\n\n      e.target.value = '';\n      input.removeEventListener('blur', onBlur);\n    }\n  });\n\n  // make sure to strip the comma when when typing\n  input.addEventListener('input', function (e) {\n    const removeComma = e.target.value.replace(/,/g, '');\n    e.target.value = removeComma;\n  });\n\n  // fire action when user paste a string with emails\n  input.addEventListener('paste', (e) => {\n    onPaste(e, props.action);\n    e.target.blur();\n  });\n\n  return template;\n};\n","import { emailLabel } from '../components/email-label';\nimport { emailInput } from '../components/email-input';\n\nexport default class shareForm {\n  constructor(selector, props) {\n    this.selector = selector;\n    this.list = document.createElement('span');\n    this.props = props;\n    this.emails = props?.emails || [];\n\n    this.buildList(this.emails);\n  }\n\n  buildList() {\n    this.emails.forEach((email) => {\n      const template = emailLabel({\n        email,\n        action: () => this.removeEmail(template),\n      });\n      this.list.appendChild(template);\n    });\n\n    this.selector.appendChild(this.list);\n\n    this.selector.appendChild(\n      emailInput({\n        placeholder: 'add more people...',\n        action: (e) => this.addEmail(e),\n      })\n    );\n  }\n\n  addEmail(email) {\n    this.appendChildEmail(email);\n  }\n\n  randomEmail() {\n    const emailArray = [\n      'push@push.it',\n      'peter@doe.com',\n      'linda@doe.ru',\n      'lisa.pater@doe.com',\n      'floor@longurl.it',\n      'jan@longurl.com',\n      'robert@longurl.ru',\n      'britt.pater@longurl.com',\n    ];\n    const randomEmail =\n      emailArray[Math.floor(Math.random() * emailArray.length)];\n\n    this.appendChildEmail(randomEmail);\n  }\n\n  removeEmail(email) {\n    this.list.removeChild(email);\n  }\n\n  appendChildEmail(email) {\n    const template = emailLabel({\n      email,\n      action: () => this.removeEmail(template),\n    });\n    this.list.appendChild(template);\n  }\n\n  emailsCount() {\n    const currentLength = this.list.querySelectorAll(\n      '[data-share-form=\"share-box-email-label-container\"]'\n    ).length;\n    alert(`Current email count is: ${currentLength}`);\n  }\n}\n","import shareForm from \"./shareForm\";\n\nexport const setup = (selector, props) => new shareForm(selector, props);\n"],"names":["props","email","template","document","createElement","dataset","shareForm","tabIndex","classList","add","test","String","toLowerCase","innerHTML","labelTemplate","querySelector","addEventListener","e","action","keyCode","code","onBlur","fireAction","newEmail","target","_e$target","value","placeholder","input","includes","onKeyDown","removeEventListener","removeComma","replace","clipboardData","window","getData","split","forEach","onPaste","blur","selector","list","emails","buildList","this","emailLabel","_this","removeEmail","appendChild","emailInput","addEmail","appendChildEmail","emailArray","randomEmail","Math","floor","random","length","removeChild","_this2","currentLength","querySelectorAll","alert"],"mappings":"uZAAA,eCegBA,OAbOC,EAcfC,EAAWC,SAASC,cAAc,cACxCF,EAASG,QAAQC,UAAY,kCAC7BJ,EAASK,SAAW,EACpBL,EAASM,UAAUC,KAjBER,EAiBgBD,EAAMC,MAhBhC,wJACDS,KAAKC,OAAOV,GAAOW,eAeuB,QAAU,YAC9DV,EAASW,UAbW,gBAAGZ,IAAAA,yFAGXA,+FDVD,mYCoBUa,CAAcd,GAGnCE,EACGa,cAAc,6CACdC,iBAAiB,SAAS,SAACC,GAC1BjB,EAAMkB,OAAOhB,MAIjBA,EAASc,iBAAiB,WAAW,SAACC,GAClB,KAAdA,EAAEE,SAA6B,UAAXF,EAAEG,MACxBpB,EAAMkB,OAAOhB,MAIVA,GC/BHmB,EAAS,SAACJ,EAAGC,GACjBI,EAAWL,EAAGC,IAaVI,EAAa,SAACL,EAAGC,SACfK,EAAWN,MAAAA,aAAAA,EAAGO,2BAAHC,EAAWC,MACX,KAAbH,GACJL,EAAOK,eAGOvB,OAzBS2B,EA0BjBzB,EAAWC,SAASC,cAAc,OACxCF,EAASG,QAAQC,UAAY,4BAC7BJ,EAASW,WA5Bcc,EA4BY3B,EA5BZ2B,6DAEcA,0BA4B/BC,EAAQ1B,EAASa,cAAc,gBAGrCa,EAAMZ,iBAAiB,QAAQ,SAACC,GAC9BI,EAAOJ,EAAGjB,EAAMkB,QAChBD,EAAEO,OAAOE,MAAQ,MAInBE,EAAMZ,iBAAiB,WAAW,SAACC,IAEjB,MAAdA,EAAEE,SACY,KAAdF,EAAEE,SACF,CAAC,QAAS,SAASU,SAASZ,EAAEG,UAlClB,SAACH,EAAGC,GACpBI,EAAWL,EAAGC,GAmCVY,CAAUb,EAAGjB,EAAMkB,QAEnBD,EAAEO,OAAOE,MAAQ,GACjBE,EAAMG,oBAAoB,OAAQV,OAKtCO,EAAMZ,iBAAiB,SAAS,SAAUC,OAClCe,EAAcf,EAAEO,OAAOE,MAAMO,QAAQ,KAAM,IACjDhB,EAAEO,OAAOE,MAAQM,KAInBJ,EAAMZ,iBAAiB,SAAS,SAACC,IA9CnB,SAACA,EAAGC,IACHD,EAAEiB,eAAiBC,OAAOD,eAAeE,QAAQ,QACzCC,MAAM,KACpBC,SAAQ,SAACrC,UAAUiB,EAAOjB,MA4CjCsC,CAAQtB,EAAGjB,EAAMkB,QACjBD,EAAEO,OAAOgB,UAGJtC,GC7DYI,wBACPmC,EAAUzC,8GACfyC,SAAWA,OACXC,KAAOvC,SAASC,cAAc,aAC9BJ,MAAQA,OACR2C,QAAS3C,MAAAA,SAAAA,EAAO2C,SAAU,QAE1BC,UAAUC,KAAKF,wDAGtB,2BACOA,OAAOL,SAAQ,SAACrC,OACbC,EAAW4C,EAAW,CAC1B7C,MAAAA,EACAiB,OAAQ,kBAAM6B,EAAKC,YAAY9C,MAEjC6C,EAAKL,KAAKO,YAAY/C,WAGnBuC,SAASQ,YAAYJ,KAAKH,WAE1BD,SAASQ,YACZC,EAAW,CACTvB,YAAa,qBACbT,OAAQ,SAACD,UAAM8B,EAAKI,SAASlC,+BAKnC,SAAShB,QACFmD,iBAAiBnD,8BAGxB,eACQoD,EAAa,CACjB,eACA,gBACA,eACA,qBACA,mBACA,kBACA,oBACA,2BAEIC,EACJD,EAAWE,KAAKC,MAAMD,KAAKE,SAAWJ,EAAWK,cAE9CN,iBAAiBE,8BAGxB,SAAYrD,QACLyC,KAAKiB,YAAY1D,mCAGxB,SAAiBA,cACTC,EAAW4C,EAAW,CAC1B7C,MAAAA,EACAiB,OAAQ,kBAAM0C,EAAKZ,YAAY9C,WAE5BwC,KAAKO,YAAY/C,8BAGxB,eACQ2D,EAAgBhB,KAAKH,KAAKoB,iBAC9B,uDACAJ,OACFK,wCAAiCF,iDCnEhB,SAACpB,EAAUzC,UAAU,IAAIM,EAAUmC,EAAUzC"}