{"version":3,"file":"multiple-email-form.min.js","sources":["../src/components/email-label/email-label.js","../src/shareForm/index.js","../src/components/email-input/email-input.js","../src/index.js"],"sourcesContent":["const labelTemplate = ({ email }) =>\n  `\n    <label data-share-form=\"share-box-email-label\">\n      ${email} <span data-share-form=\"share-box-email-close\" tabindex=\"0\">x</span>\n    </label>\n  `;\n\nexport default (props) => {\n  const { valid } = props;\n  const template = document.createElement('div');\n  template.dataset.shareForm = 'share-box-email-label-container';\n  template.tabIndex = 0;\n  template.classList.add(valid ? 'valid' : 'invalid');\n  template.innerHTML = labelTemplate(props);\n  template\n    .querySelector('[data-share-form=\"share-box-email-close\"]')\n    .addEventListener('click', (e) => {\n      props.action(e);\n    });\n\n  return template;\n};\n","import { emailLabel } from '../components/email-label';\nimport { emailInput } from '../components/email-input';\n\nexport default class shareForm {\n  constructor(selector, props) {\n    this.selector = selector;\n    this.props = props;\n    this.emails = props?.emails || [];\n\n    this.build(this.emails);\n  }\n\n  build() {\n    this.buildList(this.emails);\n  }\n\n  buildList() {\n    while (this.selector.firstChild) {\n      this.selector.removeChild(this.selector.firstChild);\n    }\n    this.emails.forEach((email) => {\n      this.selector.appendChild(\n        emailLabel({\n          email,\n          action: () => this.removeEmail(email),\n          valid: false,\n        })\n      );\n    });\n    this.selector.appendChild(\n      emailInput({\n        placeholder:\n          this.emails.length > 0 ? 'add more people...' : 'add a person...',\n        onBlur: (e) => this.onBlur(e),\n      })\n    );\n  }\n\n  addEmail(email) {\n    this.emails.push(email);\n    this.build(this.emails);\n  }\n\n  randomEmail() {\n    this.emails.push('push@push.it');\n\n    this.build(this.emails);\n  }\n\n  removeEmail(email) {\n    const index = this.emails.indexOf(email);\n    if (index !== -1) {\n      this.emails.splice(index, 1);\n    }\n\n    this.buildList(this.emails);\n  }\n\n  emailsCount() {\n    alert(`Current email count is: ${this.emails.length}`);\n  }\n\n  onBlur(e) {\n    console.log(e?.target?.value, 'onBlur event');\n    const newEmail = e?.target?.value;\n    if (newEmail === '') return;\n    this.addEmail(newEmail);\n  }\n}\n","const labelTemplate = ({ placeholder }) =>\n  `\n    <input type=\"email\" placeholder=\"${placeholder}\" />\n  `;\n\nexport default (props) => {\n  const template = document.createElement('div');\n  template.dataset.shareForm = 'share-box-input-container';\n  template.innerHTML = labelTemplate(props);\n  template.querySelector('input').addEventListener('blur', (e) => {\n    props.onBlur(e);\n  });\n\n  return template;\n};\n","import shareForm from \"./shareForm\";\n\nexport const setup = (selector, props) => new shareForm(selector, props);\n"],"names":["shareForm","selector","props","emails","build","this","buildList","placeholder","template","firstChild","removeChild","forEach","email","_this","appendChild","valid","document","createElement","dataset","tabIndex","classList","add","innerHTML","querySelector","addEventListener","e","action","emailLabel","removeEmail","length","onBlur","push","index","indexOf","splice","alert","console","log","target","_e$target","value","newEmail","_e$target2","addEmail"],"mappings":"uZAAA,ICGqBA,wBACPC,EAAUC,8GACfD,SAAWA,OACXC,MAAQA,OACRC,QAASD,MAAAA,SAAAA,EAAOC,SAAU,QAE1BC,MAAMC,KAAKF,oDAGlB,gBACOG,UAAUD,KAAKF,iCAGtB,mBCXcD,EALSK,EAMjBC,SDWGH,KAAKJ,SAASQ,iBACdR,SAASS,YAAYL,KAAKJ,SAASQ,iBAErCN,OAAOQ,SAAQ,SAACC,GACnBC,EAAKZ,SAASa,qBDdJZ,OAPSU,EAQfG,EAAUb,EAAVa,MACFP,EAAWQ,SAASC,cAAc,cACxCT,EAASU,QAAQlB,UAAY,kCAC7BQ,EAASW,SAAW,EACpBX,EAASY,UAAUC,IAAIN,EAAQ,QAAU,WACzCP,EAASc,WAbcV,EAaYV,EAbZU,6EAGjBA,6FAWNJ,EACGe,cAAc,6CACdC,iBAAiB,SAAS,SAACC,GAC1BvB,EAAMwB,OAAOD,MAGVjB,ECEDmB,CAAW,CACTf,MAAAA,EACAc,OAAQ,kBAAMb,EAAKe,YAAYhB,IAC/BG,OAAO,aAIRd,SAASa,aCxBFZ,EDyBC,CACTK,YACEF,KAAKF,OAAO0B,OAAS,EAAI,qBAAuB,kBAClDC,OAAQ,SAACL,UAAMZ,EAAKiB,OAAOL,MC3B3BjB,EAAWQ,SAASC,cAAc,QAC/BC,QAAQlB,UAAY,4BAC7BQ,EAASc,WARcf,EAQYL,EARZK,6DAEcA,eAOrCC,EAASe,cAAc,SAASC,iBAAiB,QAAQ,SAACC,GACxDvB,EAAM4B,OAAOL,MAGRjB,4BDyBP,SAASI,QACFT,OAAO4B,KAAKnB,QACZR,MAAMC,KAAKF,mCAGlB,gBACOA,OAAO4B,KAAK,qBAEZ3B,MAAMC,KAAKF,mCAGlB,SAAYS,OACJoB,EAAQ3B,KAAKF,OAAO8B,QAAQrB,IACnB,IAAXoB,QACG7B,OAAO+B,OAAOF,EAAO,QAGvB1B,UAAUD,KAAKF,mCAGtB,WACEgC,wCAAiC9B,KAAKF,OAAO0B,+BAG/C,SAAOJ,WACLW,QAAQC,IAAIZ,MAAAA,aAAAA,EAAGa,2BAAHC,EAAWC,MAAO,oBACxBC,EAAWhB,MAAAA,aAAAA,EAAGa,2BAAHI,EAAWF,MACX,KAAbC,QACCE,SAASF,gDEhEG,SAACxC,EAAUC,UAAU,IAAIF,EAAUC,EAAUC"}