{"version":3,"file":"multiple-email-form.min.js","sources":["../src/components/email-label/email-label.js","../src/components/email-input/email-input.js","../src/shareForm/index.js","../src/index.js"],"sourcesContent":["const validateEmail = (email) => {\n  const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n};\n\nconst labelTemplate = ({ email }) =>\n  `\n    <label data-share-form=\"share-box-email-label\">\n      ${email} <span data-share-form=\"share-box-email-close\" tabindex=\"0\">x</span>\n    </label>\n  `;\n\nexport default (props) => {\n  const template = document.createElement('div');\n  template.dataset.shareForm = 'share-box-email-label-container';\n  template.tabIndex = 0;\n  template.classList.add(validateEmail(props.email) ? 'valid' : 'invalid');\n  template.innerHTML = labelTemplate(props);\n  template\n    .querySelector('[data-share-form=\"share-box-email-close\"]')\n    .addEventListener('click', (e) => {\n      props.action(template);\n    });\n\n  return template;\n};\n","const labelTemplate = ({ placeholder }) =>\n  `\n    <input type=\"email\" placeholder=\"${placeholder}\" multiple>\n  `;\n\nconst onBlur = (e, action) => {\n  fireAction(e, action);\n};\n\nconst onKeyDown = (e, action) => {\n  fireAction(e, action);\n};\n\nconst onPaste = (e, action) => {\n  const paste = (e.clipboardData || window.clipboardData).getData('text');\n  const pasteArr = paste.split(',');\n  pasteArr.forEach((email) => action(email));\n};\n\nconst fireAction = (e, action) => {\n  const newEmail = e?.target?.value;\n  if (newEmail === '') return;\n  action(newEmail);\n};\n\nexport default (props) => {\n  const template = document.createElement('div');\n  template.dataset.shareForm = 'share-box-input-container';\n  template.innerHTML = labelTemplate(props);\n\n  const input = template.querySelector('input');\n\n  // fire action on blur\n  input.addEventListener('blur', (e) => {\n    input.value = '';\n    onBlur(e, props.action);\n  });\n\n  // fire action when keypress is Comma or Enter\n  input.addEventListener('keypress', (e) => {\n    if (['Comma', 'Enter'].includes(e.code)) {\n      onKeyDown(e, props.action);\n      input.focus();\n      input.removeEventListener('blur', onBlur);\n    }\n  });\n\n  // fire action when\n  input.addEventListener('paste', (e) => {\n    onPaste(e, props.action);\n    input.focus();\n    input.removeEventListener('blur', onBlur);\n  });\n\n  return template;\n};\n","import { emailLabel } from '../components/email-label';\nimport { emailInput } from '../components/email-input';\n\nexport default class shareForm {\n  constructor(selector, props) {\n    this.selector = selector;\n    this.list = document.createElement('span');\n    this.props = props;\n    this.emails = props?.emails || [];\n\n    this.build(this.emails);\n  }\n\n  build() {\n    this.buildList(this.emails);\n  }\n\n  buildList() {\n    this.emails.forEach((email) => {\n      const template = emailLabel({\n        email,\n        action: () => this.removeEmail(template),\n      });\n      this.list.appendChild(template);\n      this.selector.appendChild(this.list);\n    });\n\n    this.selector.appendChild(\n      emailInput({\n        placeholder:\n          this.emails.length > 0 ? 'add more people...' : 'add a person...',\n        action: (e) => this.addEmail(e),\n      })\n    );\n  }\n\n  addEmail(email) {\n    this.appendChildEmail(email);\n  }\n\n  randomEmail() {\n    const email = 'push@push.it';\n    this.appendChildEmail(email);\n  }\n\n  removeEmail(email) {\n    this.list.removeChild(email);\n  }\n\n  appendChildEmail(email) {\n    const template = emailLabel({\n      email,\n      action: () => this.removeEmail(template),\n    });\n    this.list.appendChild(template);\n  }\n\n  emailsCount() {\n    alert(`Current email count is: ${this.emails.length}`);\n  }\n}\n","import shareForm from \"./shareForm\";\n\nexport const setup = (selector, props) => new shareForm(selector, props);\n"],"names":["props","email","template","document","createElement","dataset","shareForm","tabIndex","classList","add","test","String","toLowerCase","innerHTML","labelTemplate","querySelector","addEventListener","e","action","onBlur","fireAction","newEmail","target","_e$target","value","placeholder","input","includes","code","onKeyDown","focus","removeEventListener","clipboardData","window","getData","split","forEach","onPaste","selector","list","emails","build","this","buildList","emailLabel","_this","removeEmail","appendChild","emailInput","length","addEmail","appendChildEmail","removeChild","_this2","alert"],"mappings":"uZAAA,eAYgBA,OAZOC,EAafC,EAAWC,SAASC,cAAc,cACxCF,EAASG,QAAQC,UAAY,kCAC7BJ,EAASK,SAAW,EACpBL,EAASM,UAAUC,KAhBER,EAgBgBD,EAAMC,MAfhC,wJACDS,KAAKC,OAAOV,GAAOW,eAcuB,QAAU,YAC9DV,EAASW,UAZW,gBAAGZ,IAAAA,mFAGjBA,4FASea,CAAcd,GACnCE,EACGa,cAAc,6CACdC,iBAAiB,SAAS,SAACC,GAC1BjB,EAAMkB,OAAOhB,MAGVA,GCnBHiB,EAAS,SAACF,EAAGC,GACjBE,EAAWH,EAAGC,IAaVE,EAAa,SAACH,EAAGC,SACfG,EAAWJ,MAAAA,aAAAA,EAAGK,2BAAHC,EAAWC,MACX,KAAbH,GACJH,EAAOG,eAGOrB,OAzBSyB,EA0BjBvB,EAAWC,SAASC,cAAc,OACxCF,EAASG,QAAQC,UAAY,4BAC7BJ,EAASW,WA5BcY,EA4BYzB,EA5BZyB,6DAEcA,0BA4B/BC,EAAQxB,EAASa,cAAc,gBAGrCW,EAAMV,iBAAiB,QAAQ,SAACC,GAC9BS,EAAMF,MAAQ,GACdL,EAAOF,EAAGjB,EAAMkB,WAIlBQ,EAAMV,iBAAiB,YAAY,SAACC,GAC9B,CAAC,QAAS,SAASU,SAASV,EAAEW,SA/BpB,SAACX,EAAGC,GACpBE,EAAWH,EAAGC,GA+BVW,CAAUZ,EAAGjB,EAAMkB,QACnBQ,EAAMI,QACNJ,EAAMK,oBAAoB,OAAQZ,OAKtCO,EAAMV,iBAAiB,SAAS,SAACC,IAnCnB,SAACA,EAAGC,IACHD,EAAEe,eAAiBC,OAAOD,eAAeE,QAAQ,QACzCC,MAAM,KACpBC,SAAQ,SAACnC,UAAUiB,EAAOjB,MAiCjCoC,CAAQpB,EAAGjB,EAAMkB,QACjBQ,EAAMI,QACNJ,EAAMK,oBAAoB,OAAQZ,MAG7BjB,GCnDYI,wBACPgC,EAAUtC,8GACfsC,SAAWA,OACXC,KAAOpC,SAASC,cAAc,aAC9BJ,MAAQA,OACRwC,QAASxC,MAAAA,SAAAA,EAAOwC,SAAU,QAE1BC,MAAMC,KAAKF,oDAGlB,gBACOG,UAAUD,KAAKF,iCAGtB,2BACOA,OAAOJ,SAAQ,SAACnC,OACbC,EAAW0C,EAAW,CAC1B3C,MAAAA,EACAiB,OAAQ,kBAAM2B,EAAKC,YAAY5C,MAEjC2C,EAAKN,KAAKQ,YAAY7C,GACtB2C,EAAKP,SAASS,YAAYF,EAAKN,cAG5BD,SAASS,YACZC,EAAW,CACTvB,YACEiB,KAAKF,OAAOS,OAAS,EAAI,qBAAuB,kBAClD/B,OAAQ,SAACD,UAAM4B,EAAKK,SAASjC,+BAKnC,SAAShB,QACFkD,iBAAiBlD,8BAGxB,gBAEOkD,iBADS,2CAIhB,SAAYlD,QACLsC,KAAKa,YAAYnD,mCAGxB,SAAiBA,cACTC,EAAW0C,EAAW,CAC1B3C,MAAAA,EACAiB,OAAQ,kBAAMmC,EAAKP,YAAY5C,WAE5BqC,KAAKQ,YAAY7C,8BAGxB,WACEoD,wCAAiCZ,KAAKF,OAAOS,sDCxD5B,SAACX,EAAUtC,UAAU,IAAIM,EAAUgC,EAAUtC"}